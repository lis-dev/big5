(this.webpackJsonpbig5=this.webpackJsonpbig5||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),c=n(15),a=n.n(c),i=(n(22),n(5)),u=(n(23),n(2)),o=n(4),l=n(7),h=n(10),d=n(9),j=n(0);function b(){return Object(j.jsx)("div",{className:"spinner text-primary",role:"status",children:Object(j.jsx)("span",{className:"sr-only",children:"Loading..."})})}function f(e){return Object(j.jsx)("button",{className:"w-full md:w-auto btn btn-light",onClick:function(t){e.onClick(e.choice)},children:e.choice.text})}function m(e){var t=e.choices.map((function(t,n){return Object(j.jsx)(f,{choice:t,onClick:e.onAnswer},t.score+"_"+n)}));return Object(j.jsxs)("div",{className:"card w-2/3 mx-auto mb-8 rounded-r-xl sm:rounded-xl overflow-hidden flex p-8",children:[Object(j.jsxs)("div",{className:"grid grid-cols-4",children:[Object(j.jsxs)("div",{className:"col-span-1 p-5 text-4xl",children:["# ",e.number,e.totalNumber?Object(j.jsxs)("sup",{className:"text-sm",children:[" of ",e.totalNumber]}):""]}),Object(j.jsx)("div",{className:"col-span-3 p-5 pb-10 text-2xl",children:Object(j.jsx)("div",{className:"card-body",children:e.question.text})})]}),Object(j.jsx)("div",{className:"justify-end card-footer",children:t})]})}var x=["N","E","A","C","O"],p=function e(t,n,s){Object(u.a)(this,e),this.domain=t,this.facet=n,this.score=s},v=function e(t,n,s){Object(u.a)(this,e),this.score=t,this.count=n,this.result=s},O=n(12),g=n.n(O),N=n(16);var y=function(){var e=Object(N.a)(g.a.mark((function e(t,n,s){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://lis-dev.github.io/big5-data"+"/data/".concat(t,"/").concat(s,"/")+n);case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),w=n(17),k=n(3),Q=function(){function e(t){Object(u.a)(this,e),this.calculationFunction=t}return Object(o.a)(e,[{key:"calculate",value:function(e){var t,n=this.initDomainResult(),s=Object(k.a)(e);try{for(s.s();!(t=s.n()).done;){var r=t.value,c=n[r.domain];c.score+=r.score,c.count++,c.result=this.calculationFunction(c.score,c.count),this.calculateFacet(c,r)}}catch(a){s.e(a)}finally{s.f()}return n}},{key:"calculateFacet",value:function(e,t){var n=e.facets;"undefined"===typeof n[t.facet]&&(n[t.facet]=new v(0,0,"neutral"));var s=n[t.facet];s.count++,s.score+=t.score,s.result=this.calculationFunction(s.score,s.count)}},{key:"initDomainResult",value:function(){var e,t={},n=Object(k.a)(x);try{for(n.s();!(e=n.n()).done;){t[e.value]={score:0,count:0,result:"neutral",facets:[]}}}catch(s){n.e(s)}finally{n.f()}return t}}]),e}(),T=function(e,t){var n=e/t,s="neutral";return n>3?s="high":n<3&&(s="low"),s},A=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).resultCalculator=void 0,s.state={answers:[],result:{},resultTexts:[],lang:"en"},s.resultCalculator=new Q(T),s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.lang,y("result","index.json",e)).then((function(e){return t.setState({resultTexts:e})}))}},{key:"resultToTextResult",value:function(e){var t,n=[],s=Object(k.a)(this.state.resultTexts);try{var r=function(){var s=t.value,r=s.results.find((function(t){return t.score===e[s.domain].result})),c=s.facets.map((function(t){return Object(w.a)({result:e[s.domain].facets[t.facet]?e[s.domain].facets[t.facet].result:"neutral"},t)}));n.push({domain:s.domain,title:s.title,shortDescription:s.shortDescription,description:s.description,resultText:r.text,facets:c})};for(s.s();!(t=s.n()).done;)r()}catch(c){s.e(c)}finally{s.f()}return n}},{key:"render",value:function(){if(!this.state.resultTexts)return Object(j.jsx)(b,{});var e=this.resultCalculator.calculate(this.props.answers);return(e?this.resultToTextResult(e):[]).map((function(e,t){return Object(j.jsxs)("div",{className:"card w-2/3 mx-auto rounded-r-xl sm:rounded-xl overflow-hidden flex p-8 mb-8",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("div",{className:"font-semibold text-gray-900",children:e.title})}),Object(j.jsx)("div",{className:"card-body",children:e.description}),Object(j.jsx)("div",{className:"card-body",children:e.resultText}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("table",{className:"table-auto border-separate",children:Object(j.jsx)("tbody",{children:e.facets.map((function(e,t){return Object(j.jsxs)("tr",{className:"border-separate border",children:[Object(j.jsx)("td",{className:"p-2",children:e.title}),Object(j.jsx)("td",{className:"p-2",children:e.result}),Object(j.jsx)("td",{className:"p-2",children:e.text})]},"facet"+t)}))})})})]},e.domain)}))}}]),n}(s.Component),C=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={questions:[],currentQuestion:null,currentQuestionNumber:0,choices:null,answers:[],lang:"en"},s.onAnswer=s.onAnswer.bind(Object(l.a)(s)),s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.initQuestionsAndAnswers(this.props.lang)}},{key:"componentDidUpdate",value:function(){this.state.lang!==this.props.lang&&(this.setState({lang:this.props.lang}),this.initQuestionsAndAnswers(this.props.lang))}},{key:"onAnswer",value:function(e){this.setState((function(t,n){return{currentQuestionNumber:t.currentQuestionNumber+1,currentQuestion:t.questions[t.currentQuestionNumber+1],answers:t.answers.concat([new p(t.currentQuestion.domain,t.currentQuestion.facet,e.score)])}}))}},{key:"render",value:function(){if(this.state.currentQuestionNumber&&this.state.questions.length&&this.state.currentQuestionNumber>=this.state.questions.length)return Object(j.jsx)(A,{answers:this.state.answers,lang:this.props.lang},this.props.lang);if(!this.state.choices||!this.state.questions.length||!this.state.currentQuestion)return Object(j.jsx)(b,{});var e=this.state.choices[this.state.currentQuestion.keyed];return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"items-center justify-center",children:Object(j.jsx)(m,{question:this.state.currentQuestion,choices:e,onAnswer:this.onAnswer,number:this.state.currentQuestionNumber+1,totalNumber:this.state.questions.length})})})}},{key:"initQuestionsAndAnswers",value:function(e){var t=this;(function(e){return y("test","questions.json",e)})(e).then((function(e){return t.setState((function(t,n){return{questions:e,currentQuestion:e[t.currentQuestionNumber]}}))})),function(e){return y("test","choices.json",e)}(e).then((function(e){return t.setState({choices:e})}))}}]),n}(s.Component),q=Object(i.proxy)({lang:"en"});var F=function(e){var t=Object(i.useSnapshot)(q);return Object(j.jsx)(C,{lang:t.lang})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))},D={en:"English",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",uk:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"};function R(){var e=Object(i.useSnapshot)(q);return Object(j.jsx)("select",{className:"form-select mx-auto",value:e.lang,onChange:function(e){return q.lang=e.target.value},children:Object.keys(D).map((function(e){return Object(j.jsx)("option",{value:e,children:D[e]},e)}))})}function B(e){return Object(j.jsxs)("section",{className:"min-h-screen bg-gray-50 ",children:[Object(j.jsx)("header",{className:"sticky top-0 bg-white shadow z-10",children:Object(j.jsxs)("div",{className:"flex flex-row items-center justify-between p-4 mx-auto max-w-7xl",children:[Object(j.jsx)("div",{className:"justify-center logo items-center",children:Object(j.jsx)("a",{href:"/",children:"The Big Five Personality Test"})}),Object(j.jsx)("div",{className:"flex flex-row",children:Object(j.jsx)(R,{})})]})}),Object(j.jsx)("main",{className:"p-4 mx-auto max-w-7xl",children:e.children})]})}a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(B,{children:Object(j.jsx)(F,{})})}),document.getElementById("root")),S()}},[[27,1,2]]]);
//# sourceMappingURL=main.16e572b6.chunk.js.map